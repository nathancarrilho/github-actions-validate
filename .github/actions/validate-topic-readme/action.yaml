# .github/actions/validar-topico-readme/action.yml
name: 'Validar T√≥pico no README.md'
description: 'Valida se um t√≥pico espec√≠fico est√° presente no ficheiro README.md do reposit√≥rio.'
inputs:
  topic_to_validate:
    description: 'O t√≥pico (palavra/frase) a procurar no README.md.'
    required: true
  readme_path:
    description: 'O caminho para o ficheiro README.md (por defeito: README.md).'
    required: false
    default: 'README.md'

runs:
  using: 'composite'
  steps:
    - name: üîç Procurar t√≥pico no README.md
      run: |
        TOPIC="${{ inputs.topic_to_validate }}"
        README_FILE="${{ inputs.readme_path }}"
        echo "A verificar se o '$README_FILE' cont√©m o t√≥pico: '$TOPIC'..."
        if [ ! -f "$README_FILE" ]; then
          echo "::error title=Valida√ß√£o README.md::‚ùå ERRO: Ficheiro '$README_FILE' n√£o encontrado."
          exit 1
        fi

        if grep -q "$TOPIC" "$README_FILE"; then
          echo "::notice title=Valida√ß√£o README.md::‚úÖ O '$README_FILE' cont√©m o t√≥pico '$TOPIC'."
        else
          echo "::error title=Valida√ß√£o README.md::‚ùå ERRO: O '$README_FILE' N√ÉO cont√©m o t√≥pico '$TOPIC'."
          exit 1 # Falha a etapa
        fi
      shell: bash